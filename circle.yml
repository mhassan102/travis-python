machine:

  xcode:
    version: 8.2

  environment:
    PY_VERSIONS: "3.5 3.6"


dependencies:
  override:
    - export PY_VERSIONS=($PY_VERSIONS) &&
      export CIRCLE_PYTHON_VERSION=${PY_VERSIONS[$CIRCLE_NODE_INDEX]} && 
      echo -e "PYTHON = $CIRCLE_PYTHON_VERSION \n============";

test:
  override:
    - ? |
        case $CIRCLE_NODE_INDEX in
          0) pyenv local 3.5.1 
             echo "1234"
             echo $(python --version)
             ;;
          1) pyenv local 3.6.1
             echo "5678"
             echo $(python --version)
             ;;
        esac
      :
        parallel: true

  post:
    - echo $(python --version):
        parallel: true
    #- case $CIRCLE_NODE_INDEX in 0) pyenv local 3.5.1 && echo $(python --version) ;; 1) pyenv local 2.7.10 && echo $(python --version) ;; esac:
    #- case $CIRCLE_NODE_INDEX in 0) echo "123" ;; 1) echo "456" ;; esac:
    #  parallel: true
    # Check PyQt5
    #- export PATH="$HOME/miniconda/bin:$PATH" && source activate test && export PYTEST_QT_API="pyqt5" && echo $(python --version)
    #- if [ "$CIRCLE_NODE_INDEX" == "0" ]; then pyenv local 3.6 && echo $(python --version):
    #    parallel: true
    # Check PyQt4 (but not on Python 3.6)
    #- if [ "$CIRCLE_NODE_INDEX" != "0" ]; then export PATH="$HOME/miniconda/bin:$PATH" && source activate test && export PYTEST_QT_API="pyqt4v2" && wxho $(python --version)
    #- if [ "$CIRCLE_NODE_INDEX" == "0" ]; then pyenv local 3.5 && echo $(python --version):
    #    parallel: true

