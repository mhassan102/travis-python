#general:
#  build_dir: ios-app

machine:

  xcode:
    version: 8.2

  environment:
    PY_VERSIONS: "3.6 3.5"


dependencies:
  override:
    #- pip install tox tox-pyenv
    #- pyenv local 2.7.10 3.5.1
    # First convert PY_VERSIONS to an array and then select the python version based on the CIRCLE_NODE_INDEX
    - export PY_VERSIONS=($PY_VERSIONS) &&
      export TRAVIS_PYTHON_VERSION=${PY_VERSIONS[$CIRCLE_NODE_INDEX]} && 
      echo -e "PYTHON = $TRAVIS_PYTHON_VERSION \n============";

#test:
#  override:
#    - lsb_release -a
#    - echo $(python --version)
#    - ls
#    - pwd
test:
  override:
    - case $CIRCLE_NODE_INDEX in 0) pyenv local 3.6 && echo $(python --version) ;; 1) pyenv local 3.5 && echo $(python --version) ;; esac:
      parallel: true
    # Check PyQt5
    #- export PATH="$HOME/miniconda/bin:$PATH" && source activate test && export PYTEST_QT_API="pyqt5" && echo $(python --version)
    #- if [ "$CIRCLE_NODE_INDEX" == "0" ]; then pyenv local 3.6 && echo $(python --version):
    #    parallel: true
    # Check PyQt4 (but not on Python 3.6)
    #- if [ "$CIRCLE_NODE_INDEX" != "0" ]; then export PATH="$HOME/miniconda/bin:$PATH" && source activate test && export PYTEST_QT_API="pyqt4v2" && wxho $(python --version)
    #- if [ "$CIRCLE_NODE_INDEX" == "0" ]; then pyenv local 3.5 && echo $(python --version):
    #    parallel: true

